classDiagram
    class BorrowRecord {
        +Long borrowId
        +Long memberId
        +Long bookId
        +Date borrowDate
        +Date dueDate
        +Date returnDate
        +BorrowStatus status
        +Integer loanPeriodDays
        +Boolean isRenewed
        +Boolean isOverdue
        +calculateDueDate() Date
        +markAsReturned() void
        +checkOverdueStatus() Boolean
        +calculatePenalty() Double
    }
    
    class Reservation {
        +Long reservationId
        +Long memberId
        +Long bookId
        +Date reservationDate
        +Date availableDate
        +Date expiryDate
        +Integer queuePosition
        +ReservationStatus status
        +updateQueuePosition() void
        +markAsAvailable() void
        +markAsExpired() void
        +calculateWaitTime() Integer
    }
    
    class Penalty {
        +Long penaltyId
        +Long memberId
        +Long borrowId
        +Double amount
        +Date createdDate
        +Date paidDate
        +PenaltyStatus status
        +String description
        +Integer overdueDays
        +calculateDailyFine() Double
        +markAsPaid() void
        +sendWarning() void
        +escalatePenalty() void
    }
    
    class Renewal {
        +Long renewalId
        +Long borrowId
        +Long memberId
        +Date renewalDate
        +Date newDueDate
        +Boolean isApproved
        +String rejectionReason
        +validateRenewal() Boolean
        +extendDueDate() void
        +checkEligibility() Boolean
    }
    
    class ReturnRecord {
        +Long returnId
        +Long borrowId
        +Long memberId
        +Long bookId
        +Date returnDate
        +Date originalDueDate
        +Boolean isEarlyReturn
        +Boolean hasLateReturn
        +Double penaltyAmount
        +String condition
        +processReturn() void
        +updateBookAvailability() void
        +calculateLateFee() Double
    }
    
    class PenaltyCalculator {
        +calculateBasicPenalty() Double
        +calculateProgressivePenalty() Double
        +checkPenaltyThreshold() Boolean
        +generateWarning() void
        +processAccountDeletion() void
    }
    
    BorrowRecord "1" --> "0..1" Renewal
    BorrowRecord "1" --> "0..1" ReturnRecord
    BorrowRecord "1" --> "0..*" Penalty
    Reservation "0..*" --> "1" Member
    BorrowRecord "0..*" --> "1" Member
    BorrowRecord "0..*" --> "1" Book
    Penalty "1" --> "1" PenaltyCalculator